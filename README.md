# PL0

使用：
```bash
mkdir build
cd build
cmake ..
make
./pl0_compiler
```

## 算法流程

1. **错误信息数组** `err_msg`：
   - 包含了各种错误信息，用于在解析过程中出现错误时提供给用户。

2. **全局变量**：
   - `ch`：最近读取的字符。
   - `sym`：最近读取的符号。
   - `id`：最近读取的标识符。
   - `num`：最近读取的数字。
   - `char_cnt`、`line_length`：字符计数和行长度。
   - `kk`、`err`：用于错误处理的计数器。
   - `curr_ins`：当前指令生成的索引。
   - `level`：当前的嵌套层次。
   - `tx`、`dx`：用于数据分配的索引。
   - `line`：存储当前行的字符。
   - `code`：存储生成的指令。

3. **保留字和符号的映射**：
   - `word`、`wsym`、`ssym`、`csym`：分别存储PL/0的保留字、符号和对应的编码。

4. **指令集** `mnemonic`：
   - 存储指令的助记符，用于生成中间代码。

5. **错误处理函数** `error`：
   - 打印错误信息，并增加错误计数。

6. **字符读取函数** `getch`：
   - 从输入流中读取一个字符，并更新全局变量`ch`和`char_cnt`。

7. **符号获取函数** `getsym`：
   - 从输入流中获取一个符号，并更新全局变量`sym`、`id`或`num`。

8. **指令生成函数** `gen`：
   - 生成一条指令并存储在`code`数组中。

9. **错误测试函数** `test`：
   - 测试当前符号是否在给定的符号集中，如果不在，则报错并跳过符号。

10. **进入符号表函数** `enter`：
    - 将常量、变量或过程的声明添加到符号表中。

11. **定位标识符函数** `position`：
    - 在符号表中查找标识符的位置。

12. **声明处理函数** `constdeclaration`、`vardeclaration`：
    - 处理常量和变量的声明。

13. **代码列表函数** `listcode`：
    - 打印生成的代码。

14. **因子、项、表达式和条件处理函数** `factor`、`term`、`expression`、`condition`：
    - 这些函数处理PL/0语言中的因子、项、表达式和条件表达式。

15. **语句处理函数** `statement`：
    - 处理PL/0语言中的语句。

16. **代码块处理函数** `block`：
    - 处理PL/0语言中的代码块，包括常量、变量声明和过程声明。

17. **基础地址计算函数** `base`：
    - 计算给定层级的基础地址。

18. **解释执行函数** `interpret`：
    - 解释并执行生成的代码。



## TODO

- [] 实现注释功能：
    - [] 块注释：从 `/*` 开始到第一个 `*/` 结束
    - [] 行注释：从 `//` 开始到行尾 `\n`
- [] 增加条件算符：
    - [x] `&&`
    - [x] `||`
    - [x] `!`
    - [] 短路运算：
        - [] 对于 `a || b`，若 `a` 为真则不计算 `b` 的真假
        - [] 对于 `a && b`，若 `a` 为假则不计算 `b` 的真假
    - [] 将 0 视为假，非 0 视为真
- [] 数组
- [] 传参
- [] 语句：
    - [] `else, elif, exit`
    - [] `return`
    - [] `for`

